<div layout="column" style="height: 100%" ng-class="{
    'xs': $mdMedia('xs'),
    'gt-xs': $mdMedia('gt-xs'),
    'sm': $mdMedia('sm'),
    'gt-sm': $mdMedia('gt-sm'),
    'md': $mdMedia('md'),
    'gt-md': $mdMedia('gt-md'),
    'lg': $mdMedia('lg'),
    'gt-lg': $mdMedia('gt-lg'),
    'xl': $mdMedia('xl')
}" md-theme="{{$ctrl.theme}}" md-theme-watch>

    <style>
        @media only screen and (max-width: 550px) {
            main h1.flagName {
                display: none;
            }
        }
        main .md-sidenav-left .current {
            background-color: gray;
            cursor: initial;
        }
        .main-content {
            overflow-x: hidden;
        }
    </style>

    <md-icon-button ng-show="$ctrl.isState('home')" ng-click="$ctrl.toggleNav()" style="cursor: pointer; z-index: 1; position: fixed; left: 10px; top: 10px;">
        <md-icon class="material-icons" style="color: white">menu</md-icon>
    </md-icon-button>

    <div layout="column" style="height: 100%; min-height: 100%; max-height: 100%">
        <md-toolbar ng-hide="$ctrl.isState('home')">
        <span class="md-toolbar-tools" layout="row">
            <md-icon-button ng-click="$ctrl.toggleNav()" style="margin-right: 10px; cursor: pointer;">
                <md-icon class="material-icons">menu</md-icon>
            </md-icon-button>
            <div flex layout="row" layout-align="space-between center">
                <img src="resources/images/ETW_Logo-01.png" style="height: 25px; position: relative; bottom: 2px; margin-right: 5px; cursor: pointer" ui-sref="home" />
                <h1 flex ui-sref="home" style="font-size: larger; cursor: pointer">
                    EatTheWorld
                </h1>
                <div flex></div>

                <div flex ng-show="$ctrl.isJapan()" ng-style="$ctrl.isState('japan')?{}:{'cursor': 'pointer'}" ui-sref="japan" layout="row" layout-align="end center">
                    <h1 class="flagName" style="font-size: larger; margin-right: 10px">Japan</h1>
                    <div style="height: 40px; width: auto;">
                        <img src="resources/icons/japan-flag.svg" flex="100" class="md-whiteframe-2dp" style="height: 100%" />
                    </div>
                </div>

                <div flex ng-show="$ctrl.isEthiopia()" ng-style="$ctrl.isState('ethiopia')?{}:{'cursor': 'pointer'}" ui-sref="ethiopia" layout="row" layout-align="end center">
                    <h1 class="flagName" style="font-size: larger; margin-right: 10px">Ethiopia</h1>
                    <div style="height: 40px; width: auto;">
                        <img src="resources/icons/ethiopia-flag.svg" flex="100" class="md-whiteframe-2dp" style="height: 100%" />
                    </div>
                </div>

            </div>
        </span>
        </md-toolbar>
        <md-content
                class="main-content"
                flex
                ui-view
                style="position: relative; min-width: 100%; max-width: 100%; width: 100%;"
                ng-class="$ctrl.wallpaper"></md-content>
    </div>

    <md-sidenav class="md-sidenav-left md-whiteframe-4dp" md-component-id="global-left" md-is-locked-open="$ctrl.menuLockedOpen()" style="height: 100%">
        <md-content layout-padding>
            <md-list flex>
                <md-icon-button ng-click="$ctrl.toggleNav()" class="clickable unselectable" style="position: absolute; top: 10px; right: 10px; z-index: 99">
                    <md-icon class="material-icons">
                        close
                    </md-icon>
                </md-icon-button>
                <h1 style="text-align: center;" ui-sref="home" ng-click="$ctrl.toggleNav()" class="clickable">Eat The World</h1>
                <div layout="row" layout-align="start center">
                    <md-input-container style="width: 100%; margin-bottom: 0;">
                        <label>Search</label>
                        <input type="search" ng-model="$ctrl.searchText" ng-change="$ctrl.search()" />
                    </md-input-container>
                    <div>
                        <md-button ng-show="$ctrl.searchActive"
                                   ng-click="$ctrl.stopSearch()"
                                   class="md-primary md-raised"
                                   style="margin-top: -5px">Cancel</md-button>
                    </div>
                </div>
                <md-divider></md-divider>
                <p ng-show="$ctrl.searchNoResults" style="text-align: center;">
                    No records match your search query.
                </p>
                <md-list-item ng-repeat-start="country in $ctrl.navData"
                              ng-hide="country.hidden"
                              ng-click="country.expand = !country.expand">
                    <span flex>{{country.name}}</span>
                    <md-icon ng-hide="country.expand">expand_more</md-icon>
                    <md-icon ng-show="country.expand">expand_less</md-icon>
                </md-list-item>
                <md-list-item ng-show="country.expand && !country.hideOverview"
                              ui-sref="{{country.state}}"
                              md-colors="$ctrl.isState(country.state) ? { 'background': 'accent' } : {}">
                    <span flex-offset="10">Overview</span>
                </md-list-item>
                <md-list-item
                        ng-repeat="module in country.modules"
                        ng-show="country.expand && !module.hidden"
                        ui-sref="{{module.state}}"
                        md-colors="$ctrl.isState(module.state) ? { 'background': 'accent' } : {}">
                    <span flex-offset="10">{{module.name}}</span>
                </md-list-item>
                <md-divider ng-hide="country.hidden" ng-repeat-end=""></md-divider>
            </md-list>
        </md-content>
    </md-sidenav>

</div>